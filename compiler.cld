parser = require "parser"
table = require "table"

local processors = {
	plaintext = 0,
	inlinemath = 0
}

function processors.section(...)
	context.section(table.concat({...}))
end

function processors.paragraph(...)
	context(table.concat({...}))
end

local file = string.sub(environment.arguments.arguments, 5)
local doc = io.loaddata(file)
context.starttext()
parser.parse(doc, processors)
context.stoptext()
